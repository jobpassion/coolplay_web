// Generated by CoffeeScript 1.8.0
(function() {
  var config, userDao;

  config = require("cloud/config/config");

  userDao = require(config.ROOT + "dao/userDao");

  AV.Cloud.beforeSave('Favorite', function(request) {
    var favo, post;
    favo = request.object;
    post = favo.get('post');
    post.increment('favoriteCount', 1);
    return userDao.save(post, function(error, result) {});
  });

  AV.Cloud.beforeDelete('Favorite', function(request) {
    var favo, post;
    favo = request.object;
    post = favo.get('post');
    post.increment('favoriteCount', -1);
    return userDao.save(post, function(error, result) {});
  });

  AV.Cloud.beforeSave('Like', function(request) {
    var favo, post;
    favo = request.object;
    post = favo.get('post');
    post.increment('likeCount', 1);
    return userDao.save(post, function(error, result) {});
  });

  AV.Cloud.beforeDelete('Like', function(request) {
    var favo, post;
    favo = request.object;
    post = favo.get('post');
    post.increment('likeCount', -1);
    return userDao.save(post, function(error, result) {});
  });

  AV.Cloud.beforeSave('Comment', function(request) {
    var favo, post;
    favo = request.object;
    post = favo.get('post');
    post.increment('commentCount', 1);
    return userDao.save(post, function(error, result) {});
  });

  AV.Cloud.beforeDelete('Comment', function(request) {
    var favo, post;
    favo = request.object;
    post = favo.get('post');
    post.increment('comment', -1);
    return userDao.save(post, function(error, result) {});
  });

}).call(this);
