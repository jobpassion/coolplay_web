// Generated by CoffeeScript 1.8.0
(function() {
  var config, userDao;

  config = require("cloud/config/config");

  userDao = require(config.ROOT + "dao/userDao");

  AV.Cloud.afterSave('Favorite', function(request) {
    var favo, post;
    favo = request.object;
    post = favo.get('post');
    post.increment('favoriteCount', 1);
    return userDao.save(post, function(error, result) {});
  });

  AV.Cloud.afterDelete('Favorite', function(request) {
    var favo, post;
    favo = request.object;
    post = favo.get('post');
    post.increment('favoriteCount', -1);
    return userDao.save(post, function(error, result) {});
  });

  AV.Cloud.afterSave('Like', function(request) {
    var favo, post;
    favo = request.object;
    post = favo.get('post');
    post.increment('likeCount', 1);
    return userDao.save(post, function(error, result) {});
  });

  AV.Cloud.afterDelete('Like', function(request) {
    var favo, post;
    favo = request.object;
    post = favo.get('post');
    post.increment('likeCount', -1);
    return userDao.save(post, function(error, result) {});
  });

}).call(this);
